profiles {
  docker {
    docker {
      enabled    = true
    }
  params.depot_url = "quay.io/biocontainers"
  }

  singularity {
    singularity {
      cacheDir   = singularity_containers_path
      libraryDir = singularity_containers_path
      enabled    = true
      autoMounts = true
      runOptions = "--containall --cleanenv --home ${PWD} --workdir ${cactus_dir}/tmp"
    }
    params.depot_url = "https://depot.galaxyproject.org/singularity/"
  }
}

process {
  //////// Single tool containers
  withLabel:fastqc {
    container = "${params.depot_url}/fastqc:0.11.7--4"
  }
  withLabel:picard {
    container = "${params.depot_url}/picard:2.26.9--hdfd78af_0"
  }
  withLabel:deeptools {
    container = "${params.depot_url}/deeptools:3.4.3--py_0"
  }
  withLabel:macs2 {
    container = "${params.depot_url}/macs2:2.2.7.1--py37hf01694f_1"
  }
  withLabel:bioperl {
    container = "${params.depot_url}/perl-bioperl-core:1.007002--pl5321hdfd78af_4"
  }
  withLabel:bbmap {
    container = "${params.depot_url}/bbmap:38.96--h5c4e2a8_0"
  }
  withLabel:multiqc {
    container = "${params.depot_url}/multiqc:1.9--py_1"
  }
  // withLabel:diffbind {
  //  container = "${params.depot_url}/bioconductor-diffbind:2.4.8--16" // without edgeR
  // }
  withLabel:kallisto {
    container = "${params.depot_url}/kallisto:0.46.2--h4f7b962_1"
  }
  withLabel:sleuth {
    container = "${params.depot_url}/r-sleuth:0.30.0--r41hdfd78af_5"
  }
  withLabel:venndiagram {
    container = "pegi3s/r_venn-diagram:1.7.0"
  }
  withLabel:homer {
    container = "${params.depot_url}/homer:4.9.1--pl5.22.0_5"
  }
  withLabel:pdftk {
    container = "mnuessler/pdftk"
  }

  //////// Multi-tools containers

  // bowtie2=2.4.4,samtools=1.13    
  withLabel:bowtie2_samtools {
    container = "${params.depot_url}/mulled-v2-c742dccc9d8fabfcff2af0d8d6799dbc711366cf:b6524911af823c7c52518f6c886b86916d062940-0"
  }

  // r-base=4.1.3,r-magrittr=2.0.3,r-dplyr=1.0.9,r-purrr=0.3.4,r-ggplot2=3.3.5,r-data.table=1.14.2
  withLabel:r_basic {
    container = "${params.depot_url}/mulled-v2-b21cd52f0c50bbd777eaed41c0b8228b84cff4bd:b09be1d801d248a5a61257583e629f17052d8181-0"
  }

  // samtools=1.15.1,bedtools=2.30.0,perl=5.32.1
  withLabel:samtools_bedtools_perl {
    container = "${params.depot_url}/mulled-v2-95fc59e28f845da0ff950325f8138eff9cedff14:0bc453d1b98bff9aef79c31f643f6b9f93bc7fbd-0"
  }

  // skewer=0.2.2,pigz=2.6
  withLabel:skewer_pigz {
    container = "${params.depot_url}/mulled-v2-734ede4cc65b3b212388567aac99f6182e023a8f:26fbad413ebdf8aee65d8aa554d52a4f69548508-0"
  }

  // r-base=4.1.3,bioconductor-chipseeker=1.30.0,r-magrittr=2.0.3,bioconductor-genomicfeatures=1.46.1,bioconductor-clusterprofiler=4.2.0,bioconductor-annotationdbi=1.56.1,r-purrr=0.3.4,r-ggplot2=3.3.5
  withLabel:bioconductor {
    container = "${params.depot_url}/mulled-v2-0161037c6d8979d1ff5de7e591f5adfb3ffe38b8:e1ff5a8d5dbc70e1e5e403fb8caf20aa575b132b-0"
  }

  // bioconductor-diffbind=3.4.0,bioconductor-csaw=1.28.0,bioconductor-edger=3.36.0,r-optparse=1.7.1
  withLabel:diffbind {
    container = "${params.depot_url}/mulled-v2-9ec5efd66a9a09ea4f9ad9bad5485675f031aeb4:cf736786cecad89eca5fea6d119a837e4bad7c08-0"
  }

  // r-base=4.1.3,r-ggplot2=3.3.5,r-magrittr=2.0.3,r-gridextra=2.3,r-rcolorbrewer=1.1_3,r-data.table=1.14.2
  withLabel:figures {
    container = "${params.depot_url}/mulled-v2-e0e17c59e64598cdb16a01c347c673dd021f778a:0dd10d4b12b50eec83ccd1f7b7740a08f2703bdf-0"
  }

  // r-base=4.1.3,bioconductor-diffbind=3.4.11,r-sleuth=0.30.0,r-ggplot2=3.3.5,r-magrittr=2.0.3,r-openxlsx=4.2.5
  withLabel:differential_abundance {
    container = "${params.depot_url}/mulled-v2-abcadfb509d8692abe35c0bd02689ab7756d85f8:1b35d287a7c9c53a258be40306bdca167e2e078a-0"
  }
}